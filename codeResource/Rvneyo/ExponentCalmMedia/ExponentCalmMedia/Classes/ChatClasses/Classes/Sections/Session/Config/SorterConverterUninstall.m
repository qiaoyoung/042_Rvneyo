// __DEBUG__
// __CLOSE_PRINT__
//
//  NIMSessionDefaultConfig.m
// InkwellValidateSplitShell
//
//  Created by chris.
//  Copyright (c) 2015年 NetEase. All rights reserved.
//

// __M_A_C_R_O__
//: #import "SorterConverterUninstall.h"
#import "SorterConverterUninstall.h"
//: #import "SearchPublishMeasuredSize.h"
#import "SearchPublishMeasuredSize.h"
//: #import "RefinedPerimeterEpisode.h"
#import "RefinedPerimeterEpisode.h"
//: #import "CosineTransformableReflectBlueprint+InkwellValidateSplitShell.h"
#import "CosineTransformableReflectBlueprint+InkwellValidateSplitShell.h"
//: #import "RegisterMechanismWarehouse.h"
#import "RegisterMechanismWarehouse.h"
//: #import "UIImage+InkwellValidateSplitShell.h"
#import "UIImage+InkwellValidateSplitShell.h"
//: #import "GlacierVisibilityMagnify.h"
#import "GlacierVisibilityMagnify.h"
//: #import "YoungAmendBackupFilter.h"
#import "YoungAmendBackupFilter.h"
//: #import "InkwellValidateSplitShell.h"
#import "InkwellValidateSplitShell.h"

//: @interface SorterConverterUninstall()
@interface SorterConverterUninstall()

//: @end
@end

//: @implementation SorterConverterUninstall
@implementation SorterConverterUninstall

//: - (CGSize)replyContentSize:(GlacierVisibilityMagnify *)model cellWidth:(CGFloat)cellWidth {
- (CGSize)brief:(GlacierVisibilityMagnify *)model with:(CGFloat)cellWidth {
    //: id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle sharedFacotry] replyConfigBy:model.repliedMessage];
    id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle overDefinite] surge:model.countact];
    //: return [config contentSize:cellWidth message:model.repliedMessage];
    return [config scatterWith:cellWidth ideal:model.countact];
}

//: - (BOOL)disableRetryButton:(GlacierVisibilityMagnify *)model
- (BOOL)brushes:(GlacierVisibilityMagnify *)model
{

    //: if (model.message.session.sessionType == NIMSessionTypeTeam)
    if (model.drawingAbort.session.sessionType == NIMSessionTypeTeam)
    {
        //: id<SorterConverterUninstall> layoutConfig = [[InkwellValidateSplitShell sharedKit] layoutConfig];
        id<SorterConverterUninstall> layoutConfig = [[InkwellValidateSplitShell sub] happyHint];
        //: BOOL left = [layoutConfig shouldShowLeft:model];
        BOOL left = [layoutConfig old:model];
        //: if (!left) {
        if (!left) {
            //: NSString *userID = [NIMSDK sharedSDK].loginManager.currentAccount;
            NSString *userID = [NIMSDK sharedSDK].loginManager.currentAccount;
            //: NIMTeamMember *member = [[NIMSDK sharedSDK].teamManager teamMember:userID inTeam:model.message.session.sessionId];
            NIMTeamMember *member = [[NIMSDK sharedSDK].teamManager teamMember:userID inTeam:model.drawingAbort.session.sessionId];
            //: if (member.isMuted) {
            if (member.isMuted) {
                //: return YES;
                return YES;
            }
        }
    }
    //: else if (model.message.session.sessionType == NIMSessionTypeSuperTeam)
    else if (model.drawingAbort.session.sessionType == NIMSessionTypeSuperTeam)
    {
        //: id<SorterConverterUninstall> layoutConfig = [[InkwellValidateSplitShell sharedKit] layoutConfig];
        id<SorterConverterUninstall> layoutConfig = [[InkwellValidateSplitShell sub] happyHint];
        //: BOOL left = [layoutConfig shouldShowLeft:model];
        BOOL left = [layoutConfig old:model];
        //: if (!left) {
        if (!left) {
            //: NSString *userID = [NIMSDK sharedSDK].loginManager.currentAccount;
            NSString *userID = [NIMSDK sharedSDK].loginManager.currentAccount;
            //: NIMTeamMember *member = [[NIMSDK sharedSDK].superTeamManager teamMember:userID inTeam:model.message.session.sessionId];
            NIMTeamMember *member = [[NIMSDK sharedSDK].superTeamManager teamMember:userID inTeam:model.drawingAbort.session.sessionId];
            //: if (member.isMuted) {
            if (member.isMuted) {
                //: return YES;
                return YES;
            }
        }
    }

    //: if (!model.message.isReceivedMsg)
    if (!model.drawingAbort.isReceivedMsg)
    {
        //: return model.message.deliveryState != NIMMessageDeliveryStateFailed;
        return model.drawingAbort.deliveryState != NIMMessageDeliveryStateFailed;
    }
    //: else
    else
    {
//        return model.message.attachmentDownloadState != NIMMessageAttachmentDownloadStateFailed;
        //: return YES;
        return YES;
    }
}


//: - (CGSize)contentSize:(GlacierVisibilityMagnify *)model cellWidth:(CGFloat)cellWidth{
- (CGSize)capacity:(GlacierVisibilityMagnify *)model pureTo:(CGFloat)cellWidth{
    //: id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle sharedFacotry] configBy:model.message];
    id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle overDefinite] rareInYield:model.drawingAbort];
    //: return [config contentSize:cellWidth message:model.message];
    return [config scatterWith:cellWidth ideal:model.drawingAbort];
}


//: - (CGSize)avatarSize:(GlacierVisibilityMagnify *)model
- (CGSize)boot:(GlacierVisibilityMagnify *)model
{
    //: return CGSizeMake(36, 36);
    return CGSizeMake(36, 36);
}

//: - (CGPoint)avatarMargin:(GlacierVisibilityMagnify *)model
- (CGPoint)fence:(GlacierVisibilityMagnify *)model
{
    //: return CGPointMake(8.f, 0.f);
    return CGPointMake(8.f, 0.f);
}


//: - (NSString *)cellContent:(GlacierVisibilityMagnify *)model{
- (NSString *)outsideFlow:(GlacierVisibilityMagnify *)model{
    //: id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle sharedFacotry] configBy:model.message];
    id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle overDefinite] rareInYield:model.drawingAbort];
    //: NSString *cellContent = [config cellContent:model.message];
    NSString *cellContent = [config cur:model.drawingAbort];
    //: return cellContent.length ? cellContent : @"RefinedPerimeterEpisode";
    return cellContent.length ? cellContent : @"RefinedPerimeterEpisode";
}

//: - (UIEdgeInsets)cellInsets:(GlacierVisibilityMagnify *)model
- (UIEdgeInsets)frontAbove:(GlacierVisibilityMagnify *)model
{
    //: if ([[self cellContent:model] isEqualToString:@"TouchEquipmentFairAllocate"]) {
    if ([[self outsideFlow:model] isEqualToString:@"TouchEquipmentFairAllocate"]) {
        //: return UIEdgeInsetsZero;
        return UIEdgeInsetsZero;
    }
    //: CGFloat cellTopToBubbleTop = 3;
    CGFloat cellTopToBubbleTop = 3;
    //: CGFloat otherNickNameHeight = 20;
    CGFloat otherNickNameHeight = 20;
    //: CGFloat bubbleLeftToCellLeft = 13;
    CGFloat bubbleLeftToCellLeft = 13;
    //: CGFloat otherBubbleOriginX = [self shouldShowAvatar:model] ? [self avatarSize:model].width + bubbleLeftToCellLeft : 0;
    CGFloat otherBubbleOriginX = [self clip:model] ? [self boot:model].width + bubbleLeftToCellLeft : 0;
    //: CGFloat cellBubbleButtomToCellButtom = 13;
    CGFloat cellBubbleButtomToCellButtom = 13;
    //: if ([self shouldShowNickName:model])
    if ([self jobLetter:model])
    {
        //要显示名字
        //: return UIEdgeInsetsMake(cellTopToBubbleTop + otherNickNameHeight ,otherBubbleOriginX,cellBubbleButtomToCellButtom, 0);
        return UIEdgeInsetsMake(cellTopToBubbleTop + otherNickNameHeight ,otherBubbleOriginX,cellBubbleButtomToCellButtom, 0);
    }
    //: else
    else
    {
        //: return UIEdgeInsetsMake(cellTopToBubbleTop,otherBubbleOriginX,cellBubbleButtomToCellButtom, 0);
        return UIEdgeInsetsMake(cellTopToBubbleTop,otherBubbleOriginX,cellBubbleButtomToCellButtom, 0);
    }

}

//: - (UIEdgeInsets)contentViewInsets:(GlacierVisibilityMagnify *)model{
- (UIEdgeInsets)sink:(GlacierVisibilityMagnify *)model{
    //: id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle sharedFacotry] configBy:model.message];
    id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle overDefinite] rareInYield:model.drawingAbort];
    //: return [config contentViewInsets:model.message];
    return [config endless:model.drawingAbort];
}

//: - (UIEdgeInsets)replyContentViewInsets:(GlacierVisibilityMagnify *)model{
- (UIEdgeInsets)input:(GlacierVisibilityMagnify *)model{
    //: id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle sharedFacotry] replyConfigBy:model.repliedMessage];
    id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle overDefinite] surge:model.countact];
    //: return [config contentViewInsets:model.repliedMessage];
    return [config endless:model.countact];
}


//: - (CGPoint)nickNameMargin:(GlacierVisibilityMagnify *)model
- (CGPoint)refuseByBetween:(GlacierVisibilityMagnify *)model
{
    //: return [self shouldShowAvatar:model] ? CGPointMake([self avatarSize:model].width + 15.f, -3.f) : CGPointMake(10.f, -3.f);
    return [self clip:model] ? CGPointMake([self boot:model].width + 15.f, -3.f) : CGPointMake(10.f, -3.f);
}


//: - (NSArray *)customViews:(GlacierVisibilityMagnify *)model
- (NSArray *)relief:(GlacierVisibilityMagnify *)model
{
    //: return nil;
    return nil;
}

//: - (NSString *)replyContent:(GlacierVisibilityMagnify *)model {
- (NSString *)anGrave:(GlacierVisibilityMagnify *)model {
    //: id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle sharedFacotry] replyConfigBy:model.repliedMessage];
    id<ClusterUrbanShrinkSoftened>config = [[OrnateMediaConstraintCircle overDefinite] surge:model.countact];
    //: NSString *cellContent = [config cellContent:model.repliedMessage];
    NSString *cellContent = [config cur:model.countact];
    //: return cellContent.length ? cellContent : @"RefinedPerimeterEpisode";
    return cellContent.length ? cellContent : @"RefinedPerimeterEpisode";
}

//: - (BOOL)shouldShowAvatar:(GlacierVisibilityMagnify *)model
- (BOOL)clip:(GlacierVisibilityMagnify *)model
{
    //: return [[InkwellValidateSplitShell sharedKit].config setting:model.message].showAvatar;
    return [[InkwellValidateSplitShell sub].whisperPath impactDominant:model.drawingAbort].save;
}

//: - (BOOL)shouldShowNickName:(GlacierVisibilityMagnify *)model{
- (BOOL)jobLetter:(GlacierVisibilityMagnify *)model{
    //: NIMMessage *message = model.message;
    NIMMessage *message = model.drawingAbort;
    //: if (message.messageType == NIMMessageTypeNotification)
    if (message.messageType == NIMMessageTypeNotification)
    {
        //: NIMNotificationType type = [(NIMNotificationObject *)message.messageObject notificationType];
        NIMNotificationType type = [(NIMNotificationObject *)message.messageObject notificationType];
        //: if (type == NIMNotificationTypeTeam || type == NIMNotificationTypeSuperTeam) {
        if (type == NIMNotificationTypeTeam || type == NIMNotificationTypeSuperTeam) {
            //: return NO;
            return NO;
        }
    }
    //: if (message.messageType == NIMMessageTypeTip) {
    if (message.messageType == NIMMessageTypeTip) {
        //: return NO;
        return NO;
    }

    //: BOOL isTeamMessage = (message.session.sessionType == NIMSessionTypeTeam
    BOOL isTeamMessage = (message.session.sessionType == NIMSessionTypeTeam
                          //: || message.session.sessionType == NIMSessionTypeSuperTeam);
                          || message.session.sessionType == NIMSessionTypeSuperTeam);
    //: return (!message.isOutgoingMsg && isTeamMessage);
    return (!message.isOutgoingMsg && isTeamMessage);
}


//: - (BOOL)shouldDisplayBubbleBackground:(GlacierVisibilityMagnify *)model
- (BOOL)light:(GlacierVisibilityMagnify *)model
{
    //: id<ClusterUrbanShrinkSoftened> config = [[OrnateMediaConstraintCircle sharedFacotry] configBy:model.message];
    id<ClusterUrbanShrinkSoftened> config = [[OrnateMediaConstraintCircle overDefinite] rareInYield:model.drawingAbort];
    //: if ([config respondsToSelector:@selector(enableBackgroundBubbleView:)])
    if ([config respondsToSelector:@selector(intervalerruptTo:)])
    {
        //: return [config enableBackgroundBubbleView:model.message];
        return [config intervalerruptTo:model.drawingAbort];
    }
    //: return YES;
    return YES;
}

//: - (UIEdgeInsets)replyCellInsets:(GlacierVisibilityMagnify *)model
- (UIEdgeInsets)stripByWood:(GlacierVisibilityMagnify *)model
{
    //: if ([[self cellContent:model] isEqualToString:@"TouchEquipmentFairAllocate"]) {
    if ([[self outsideFlow:model] isEqualToString:@"TouchEquipmentFairAllocate"]) {
        //: return UIEdgeInsetsZero;
        return UIEdgeInsetsZero;
    }
    //: CGFloat cellTopToBubbleTop = 3;
    CGFloat cellTopToBubbleTop = 3;
    //: CGFloat otherNickNameHeight = 20;
    CGFloat otherNickNameHeight = 20;
    //: CGFloat bubbleLeftToCellLeft = 13;
    CGFloat bubbleLeftToCellLeft = 13;
    //: CGFloat otherBubbleOriginX = [self shouldShowAvatar:model] ? [self avatarSize:model].width + bubbleLeftToCellLeft : 0;
    CGFloat otherBubbleOriginX = [self clip:model] ? [self boot:model].width + bubbleLeftToCellLeft : 0;
    //: CGFloat cellBubbleButtomToCellButtom = 1;
    CGFloat cellBubbleButtomToCellButtom = 1;
    //: if ([self shouldShowNickName:model])
    if ([self jobLetter:model])
    {
        //要显示名字
        //: return UIEdgeInsetsMake(cellTopToBubbleTop + otherNickNameHeight ,otherBubbleOriginX,cellBubbleButtomToCellButtom, 0);
        return UIEdgeInsetsMake(cellTopToBubbleTop + otherNickNameHeight ,otherBubbleOriginX,cellBubbleButtomToCellButtom, 0);
    }
    //: else
    else
    {
        //: return UIEdgeInsetsMake(cellTopToBubbleTop,otherBubbleOriginX,cellBubbleButtomToCellButtom, 0);
        return UIEdgeInsetsMake(cellTopToBubbleTop,otherBubbleOriginX,cellBubbleButtomToCellButtom, 0);
    }

}

//: - (BOOL)shouldShowLeft:(GlacierVisibilityMagnify *)model
- (BOOL)old:(GlacierVisibilityMagnify *)model
{
    //: return !model.message.isOutgoingMsg;
    return !model.drawingAbort.isOutgoingMsg;
}

//: @end
@end